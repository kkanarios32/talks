\ProvidesPackage{beamerthemekellentheme}

\RequirePackage{fontspec}
\RequirePackage{graphicx}
\usefonttheme{serif}

% Load required components
% \usepackage{beamerthemedefault} % Base theme

% Font and color
\defaultfontfeatures{Scale=MatchLowercase}
% \setmainfont{Literata-Regular.ttf}[
%     path = ./fonts/,
%     BoldFont = Literata-Bold.ttf,
%     ItalicFont = Literata-Italic.ttf,
%     BoldItalicFont = Literata-BoldItalic.ttf ]
\setmainfont{FacebookSansRegular.ttf}[
    path = ./fonts/,
    BoldFont = FacebookSansBold.ttf,
    ItalicFont = FacebookSansItalic.ttf,
    BoldItalicFont = FacebookSansBoldItalic.ttf ]

% Define custom colors
\definecolor{blue}{RGB}{0,39,76}
\definecolor{maize}{RGB}{255,203,5}
\definecolor{red}{RGB}{154,51,36}
\definecolor{green}{RGB}{117,152,141}
\definecolor{orange}{RGB}{216,96,24}

\setbeamercolor{block title}{bg=gray!10,fg=blue}
\setbeamercolor{block body}{bg=gray!10,fg=black}
\setbeamerfont{block title}{series=\bfseries, size=\normalsize}
\setbeamerfont{block body}{series=\mdseries, size=\small}
\setbeamertemplate{blocks}[rounded][shadow=false]

% ALERT BLOCK (usually red)
\setbeamercolor{block title alerted}{bg=red!10}
\setbeamercolor{block body alerted}{bg=red!10, fg=black}

% EXAMPLE BLOCK (usually green/blue)
\setbeamercolor{block title example}{bg=green!30, fg=green!90!black}
\setbeamercolor{block body example}{bg=green!30, fg=black}

\newenvironment{borderblock}[1]{%
  \setbeamercolor{block body orange}{bg=orange!10, fg=black}
  \begin{beamerboxesrounded}[lower=block body orange, upper=block title orange]{\usebeamerfont{block title}\bfseries #1}
}{%
  \end{beamerboxesrounded}
}

\newenvironment{orangeblock}[1]{%
  \setbeamercolor{block title orange}{fg=orange,bg=orange!10}
  \setbeamercolor{block body orange}{bg=orange!10, fg=black}
  \begin{beamerboxesrounded}[lower=block body orange, upper=block title orange]{\usebeamerfont{block title}\bfseries #1}
}{%
  \end{beamerboxesrounded}
}

% Set TOC appearance
\setbeamertemplate{section in toc}[circle]
\setbeamertemplate{subsection in toc}[square]
\setbeamerfont{subsection in toc}{size=\footnotesize}

\setbeamercolor{section in toc}{fg=blue}
\setbeamercolor{subsection in toc}{fg=gray}

% \oddsidemargin 0.0in            % Set the left margin for odd-numbered pages to 0.5 inches.
% \evensidemargin 0.3in           % Set the left margin for even-numbered pages to match the odd-numbered pages (for double-sided documents).
% \marginparwidth 0in             % Disable margin notes by setting the margin width to 0.
% \textheight 9.0 true in         % Define the height of the text area, including footnotes and figures, to be 9 inches.
% \textwidth 6.0 true in          % Define the width of the text area to be 5.5 inches.
% \widowpenalty=10000             % Prevent single lines (widows) at the top of a page by assigning a high penalty.
% \clubpenalty=10000              % Prevent single lines (orphans) at the bottom of a page by assigning a high penalty.
% \flushbottom                    % Align the text at the bottom of each page to give pages a consistent length.
% \sloppy                         % Allow LaTeX more flexibility in line-breaking to reduce overfull lines (long lines extending into the margins).

% Set beamer colors
\setbeamercolor{frametitle}{bg=white, fg=blue}
\setbeamerfont{frametitle}{series=\bfseries, shape=\itshape, size=\large}
\setbeamercolor{title}{fg=blue}
\setbeamercolor{structure}{fg=blue}
\setbeamercolor{item}{fg=blue}

% Customize frametitle
\setbeamertemplate{title page}{
  \begin{flushleft}
    \vspace*{-0.6in}
    \hspace*{-0.3in}
    \vspace*{0.2in}
    \includegraphics[width=0.2\linewidth]{figures/umich-crest.png}
    % Optional top rule
    \rule{\textwidth}{0.8pt}\par\vspace{0.5em}

    {\usebeamerfont{title}\usebeamercolor[fg]{title}\textbf{\inserttitle}\par}
    \vspace{0.8em}

    {\footnotesize \usebeamerfont{author}\usebeamercolor[fg]{author}\insertauthor\par}
    \vspace{0.2em}
    {\footnotesize \usebeamerfont{date}\usebeamercolor[fg]{date}\insertdate\par}

    % Optional bottom rule
    \vspace{1em}
    \rule{\textwidth}{0.8pt}
  \end{flushleft}
}

\defbeamertemplate*{footline}{myfootline}{
\ifnum \insertpagenumber=1

\leavevmode%
\hbox{%
\begin{beamercolorbox}[wd=\paperwidth,ht=.80ex,dp=1ex,center]{}%
% empty environment to raise height
\end{beamercolorbox}}%
\vskip0pt%
\else
\hspace*{.5cm}\Tiny{%
\hspace*{50pt} \hfill\insertframenumber/\inserttotalframenumber\hspace*{.00cm} \\ \vspace*{5pt}}%
\fi
}

% Remove navigation symbols
\setbeamertemplate{navigation symbols}{}
